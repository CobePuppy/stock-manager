# 项目配置文件

# -----------------
# 基础配置
# -----------------

# 缓存数据保存目录
CACHE_DIR = 'stock_data_cache'

# 数据库路径
DB_PATH = 'stock_data.db'

# 回测历史数据库路径
HISTORY_DB_PATH = 'stock_history.db'

# 分析结果保存目录
RESULT_DIR = 'analysis_results'

# 历史文件保留天数
KEEP_DAYS = 7

# 每次分析取前多少名
TOP_N = 20

# -----------------
# 大模型配置 (用于预测功能)
# -----------------

# 是否启用预测功能
ENABLE_PREDICTION = True

# 对前多少名进行详细预测 (建议不要太多，避免消耗过多Token或请求超时)
PREDICT_TOP_N = 3

# 大模型 API 地址 (例如 DeepSeek, OpenAI, Moonshot 等兼容 OpenAI 格式的接口)
# 硅基流动 (SiliconFlow) API 地址
LLM_API_URL = "https://api.siliconflow.cn/v1/chat/completions"

# API Key (请在此处填入您的 Key)
LLM_API_KEY = "sk-fxaqhrxhuluwxteaudthpjmcljwidzyrowizeqgbxpyyklvz"

# 模型名称
LLM_MODEL = "Qwen/Qwen3-30B-A3B"

# 提示词模板
PROMPT_TEMPLATE = """
你是一位资深量化交易专家和A股分析师，拥有10年以上的实盘经验。请对以下股票进行深度分析。

═══════════════════════════════════════════
【基本信息】
股票名称: {stock_name} ({stock_code})
{basic_info}

【资金流向数据】
{fund_data}

【技术分析数据 (近5日K线)】
{history_data}
技术指标说明:
- MA5/MA20: 短期/中期均线，判断趋势方向
- RSI6: 相对强弱指标 (>80超买，<20超卖，50中性)
- MACD: 柱状图值 (>0多头占优，<0空头占优)

【市场动态与新闻】
{news_data}
═══════════════════════════════════════════

## 分析要求
请从以下5个维度进行**深度量化分析**，给出详细的操作策略：

### 1. 技术面分析 (40%)
- 趋势判断: 均线排列、支撑压力位
- 动能指标: RSI是否超买超卖、MACD金叉死叉
- 量价关系: 放量上涨/缩量下跌的信号强度
- 关键价位: 突破位、回踩位、止损位

### 2. 资金面分析 (35%)
- 主力行为: 增仓占比、净流入强度
- 资金性质: 大单/散户资金比例
- 持续性: 连续流入天数与强度变化
- 放量质量: 结合成交额和换手率评估

### 3. 基本面分析 (15%)
- 估值水平: PE/PB是否合理
- 行业景气度: 所处板块强弱
- 市值规模: 流通盘大小对波动的影响

### 4. 消息面分析 (10%)
- 重大事件: 是否有利好/利空消息
- 市场情绪: 新闻热度与市场关注度

### 5. 综合研判与操作策略
基于以上分析，给出：
- **买入策略**: 价格区间、买入理由、建议仓位(轻仓/半仓/重仓)
- **卖出策略**: 止盈位、止损位、卖出信号
- **时间节点**: 预计变盘时间、关键观察日期
- **风险提示**: 主要风险点与应对措施

## 输出格式 (严格JSON)
请输出以下JSON格式，确保可被程序解析。注意：分析内容要详细具体，不要模糊笼统。

{{
    "technical_analysis": "技术面详细分析 (150-200字): 包含趋势、指标、关键价位",
    "fund_analysis": "资金面详细分析 (100-150字): 主力行为、资金流向强度",
    "comprehensive_score": "综合评分 (0-100分): 基于五维分析的量化打分",
    "buy": "买入建议: '价格区间 + 仓位建议' 或 '观望' (若不适合买入)",
    "buy_reason": "买入理由 (80-100字): 为什么在这个价位买入",
    "sell": "卖出建议: '止盈位 + 止损位'",
    "sell_reason": "卖出策略 (60-80字): 何时卖出、如何止盈止损",
    "time": "时间节点分析 (80-100字): 预计变盘时间、关键观察日期",
    "risk": "风险提示 (60-80字): 主要风险点与应对措施",
    "position": "建议仓位: '轻仓(20-30%)' / '半仓(40-60%)' / '重仓(70-80%)' / '空仓观望'"
}}

## 注意事项
1. 所有价格必须基于当前股价合理估算，不能凭空臆想
2. 买入价应在当前价±5%以内，止盈位在+10%~+30%区间
3. 必须给出具体的止损位，风险控制是第一位的
4. 分析要有逻辑链条，不要只堆砌专业术语
5. 如果技术面+资金面都不支持，果断建议"观望"
"""
